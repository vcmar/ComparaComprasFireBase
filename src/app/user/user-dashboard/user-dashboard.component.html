<div class="container">
  <h1>Meu Painel</h1>
  <div class="row">
    <div class="col-sm">
      <div class="row">
        <div class="col-sm col-8"><h4>Meus Ãºltimos registros</h4></div>
        <div class="col-sm col-4 text-right">
          <a
            class="btn btn-success btn-sm"
            routerLink="/user/purchase/new"
            role="button"
            >Nova compra</a
          >
        </div>
      </div>

      <div class="mat-elevation-z8">
        <table mat-table [dataSource]="purchaseDataSource" matSort>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

          <ng-container matColumnDef="date">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="text-center"
            >
              <strong>Data</strong>
            </th>
            <td mat-cell *matCellDef="let row">
              {{ row.date | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="place">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="text-center"
            >
              <strong>Local</strong>
            </th>
            <td mat-cell *matCellDef="let row">
              {{ row.place }}
            </td>
          </ng-container>
          <ng-container matColumnDef="options">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="align-right"
            >
              <strong>Produtos</strong>
            </th>
            <td mat-cell *matCellDef="let row" class="text-right cell-align-right">
              <button
                class="btn btn-secondary btn-sm"
                (click)="showProducts(row)"
              >
              <fa-icon [icon]="faEye"></fa-icon> Lista
              </button>
              <button
                class="btn btn-secondary btn-sm"
                (click)="editPurchase(row)"
                style="margin-left: 0.5rem;"
              >
              <fa-icon [icon]="faEdit"></fa-icon> Editar
              </button>
            </td>
          </ng-container>
        </table>
        <mat-paginator [pageSizeOptions]="pageSizeOptions"></mat-paginator>
      </div>

      <!-- <table class="table table-sm table-striped">
        <thead class="thead-light">
          <tr>
            <th scope="col">Data</th>
            <th scope="col">Local</th>
            <th scope="col">Produtos</th>
          </tr>
        </thead>

        <tbody *ngIf="isLoadingPurchases">
          <tr>
            <td colspan="3" class="text-center">
              <img
                src="../../../assets/Blocks-1s-200px.svg"
                width="50px;"
                height="50px;"
              />
            </td>
          </tr>
        </tbody>

        <tbody>
          <tr *ngFor="let item of this.myPurchases">
            <td>{{ item.date | date }}</td>
            <td>{{ item.place }}</td>
            <td class="text-right">
              <button
                class="btn btn-secondary btn-sm"
                (click)="showProducts(item)"
              >
                Ver Lista
              </button>
              <button
                class="btn btn-secondary btn-sm"
                (click)="editPurchase(item)"
              >
                Edit
              </button>
            </td>
          </tr>
        </tbody>
      </table> -->
    </div>
  </div>
  <div class="row">
    <div class="col-sm">
      <app-product-search
        *ngIf="shouldDisplayTable"
        [shouldDisplaySearch]="false"
        [shouldDisplayTitle]="true"
        [mainTitle]="listTitle"
        [shouldDisplayPlace]="false"
        [shouldDisplayDate]="false"
        [shouldDisplayPriceHistory]="true"
        [prodList]="prodsFromPurchase"
      ></app-product-search>
    </div>
  </div>
</div>
